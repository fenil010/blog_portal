{% extends 'blog/base.html' %}
{% block title %}{% if form.instance.pk %}Edit{% else %}Create{% endif %} Post - MyBlog{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto">
    <!-- Header -->
    <div class="text-center mb-12 header-section">
        <div
            class="inline-flex items-center justify-center w-16 h-16 rounded-2xl bg-gradient-to-br from-cream-300 to-cream-400 mb-6 shadow-lg">
            <svg class="w-8 h-8 text-espresso-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z" />
            </svg>
        </div>
        <h1 class="text-4xl font-serif font-bold mb-3 text-espresso-800">{% if form.instance.pk %}Edit Your Post{% else
            %}Create New Post{% endif %}</h1>
        <p class="text-espresso-500">Share your thoughts with the world</p>
    </div>

    <!-- Form Card -->
    <div class="form-card glass rounded-3xl p-8">
        <form method="post" class="space-y-6">
            {% csrf_token %}

            <!-- Title -->
            <div>
                <label class="block text-sm font-medium text-espresso-600 mb-2">Title</label>
                <input type="text" name="title" value="{{ form.title.value|default:'' }}" required
                    class="w-full px-5 py-4 bg-cream-50 border border-cream-200 rounded-xl text-espresso-800 placeholder-espresso-400 focus:outline-none focus:border-cream-300 focus:ring-2 focus:ring-cream-200 transition-all"
                    placeholder="Enter an engaging title...">
            </div>

            <!-- Category -->
            <div>
                <label class="block text-sm font-medium text-espresso-600 mb-2">Category</label>
                <select name="category" required
                    class="w-full px-5 py-4 bg-cream-50 border border-cream-200 rounded-xl text-espresso-800 focus:outline-none focus:border-cream-300 focus:ring-2 focus:ring-cream-200 transition-all appearance-none cursor-pointer">
                    <option value="" class="bg-white">Select a category</option>
                    {% for category in form.category.field.queryset %}
                    <option value="{{ category.id }}" class="bg-white" {% if
                        form.category.value==category.id|stringformat:"i" %}selected{% endif %}>{{ category.name }}
                    </option>
                    {% endfor %}
                </select>
            </div>

            <!-- Content -->
            <div>
                <label class="block text-sm font-medium text-espresso-600 mb-2">Content</label>
                <textarea name="content" rows="12" required
                    class="w-full px-5 py-4 bg-cream-50 border border-cream-200 rounded-xl text-espresso-800 placeholder-espresso-400 focus:outline-none focus:border-cream-300 focus:ring-2 focus:ring-cream-200 transition-all resize-none"
                    placeholder="Write your story...">{{ form.content.value|default:'' }}</textarea>
            </div>

            <!-- Actions -->
            <div class="flex justify-between items-center pt-6 border-t border-cream-200">
                <a href="{% url 'home' %}"
                    class="px-6 py-3 text-espresso-500 hover:text-espresso-800 border border-cream-200 hover:border-cream-300 rounded-xl transition-all">
                    Cancel
                </a>
                <button type="submit"
                    class="btn-shine px-8 py-3 bg-gradient-to-r from-cream-300 to-cream-400 text-espresso-700 font-semibold rounded-xl hover:shadow-lg hover:shadow-cream-300/50 transform hover:scale-105 transition-all flex items-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                    </svg>
                    {% if form.instance.pk %}Update Post{% else %}Publish Post{% endif %}
                </button>
            </div>
        </form>
    </div>
</div>

<script>
    gsap.from('.header-section', { opacity: 0, y: -30, duration: 0.8 });
    gsap.from('.form-card', { opacity: 0, y: 40, duration: 0.8, delay: 0.3 });
</script>
{% endblock %}